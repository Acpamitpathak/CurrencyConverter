import os
import json
from datetime import datetime

def save_json_as_markdown(data: dict) -> str:
    # Ensure output is relative to this file's location
    base_dir = os.path.dirname(os.path.abspath(__file__))
    output_dir = os.path.join(base_dir, "output")
    os.makedirs(output_dir, exist_ok=True)

    # Generate unique filename
    filename = f"evaluation_{datetime.now().strftime('%Y%m%d_%H%M%S')}.md"
    filepath = os.path.join(output_dir, filename)

    # Save JSON as markdown content
    with open(filepath, "w", encoding="utf-8") as f:
        f.write("# âœ… LLM Evaluation Output\n\n")
        f.write("```json\n")
        f.write(json.dumps(data, indent=2))
        f.write("\n```")

    return filepath