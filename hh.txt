from semantic_kernel import Kernel
from semantic_kernel.connectors.ai.open_ai import OpenAIChatService
import os

def setup_kernel():
    # Initialize the kernel
    kernel = Kernel()

    # Set your OpenAI model and key
    model_id = "gpt-4o"  # or "gpt-4", "gpt-3.5-turbo"
    api_key = os.getenv("OPENAI_API_KEY", "your-openai-api-key")

    # Register the OpenAI chat service
    kernel.add_chat_service(
        service_id="chat-gpt",
        service=OpenAIChatService(model_id=model_id, api_key=api_key)
    )

    # Set default chat service
    kernel.set_default_chat_service("chat-gpt")

    return kernel